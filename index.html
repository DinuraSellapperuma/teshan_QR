<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">QR Code Generator</h1>
            <p class="text-gray-600">Generate and download QR codes instantly</p>
        </div>

        <!-- Main Content -->
        <div class="max-w-4xl mx-auto">
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Input Section -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Generate QR Code</h2>
                    
                    <!-- Text Input -->
                    <div class="mb-6">
                        <label for="qrText" class="block text-sm font-medium text-gray-700 mb-2">
                            Enter text or URL
                        </label>
                        <textarea 
                            id="qrText" 
                            placeholder="Enter text, URL, or any data you want to encode..."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                            rows="4"
                        >https://www.example.com</textarea>
                    </div>

                    <!-- Options -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div>
                            <label for="qrSize" class="block text-sm font-medium text-gray-700 mb-2">
                                Size (px)
                            </label>
                            <select id="qrSize" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="200">200x200</option>
                                <option value="300" selected>300x300</option>
                                <option value="400">400x400</option>
                                <option value="500">500x500</option>
                                <option value="600">600x600</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="qrColor" class="block text-sm font-medium text-gray-700 mb-2">
                                Foreground Color
                            </label>
                            <input 
                                type="color" 
                                id="qrColor" 
                                value="#000000"
                                class="w-full h-10 border border-gray-300 rounded-lg cursor-pointer"
                            >
                        </div>
                    </div>

                    <!-- Background Color -->
                    <div class="mb-6">
                        <label for="qrBgColor" class="block text-sm font-medium text-gray-700 mb-2">
                            Background Color
                        </label>
                        <input 
                            type="color" 
                            id="qrBgColor" 
                            value="#ffffff"
                            class="w-full h-10 border border-gray-300 rounded-lg cursor-pointer"
                        >
                    </div>

                    <!-- Error Correction Level -->
                    <div class="mb-6">
                        <label for="errorLevel" class="block text-sm font-medium text-gray-700 mb-2">
                            Error Correction Level
                        </label>
                        <select id="errorLevel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="L">Low (7%)</option>
                            <option value="M" selected>Medium (15%)</option>
                            <option value="Q">Quartile (25%)</option>
                            <option value="H">High (30%)</option>
                        </select>
                    </div>

                    <!-- Generate Button -->
                    <button 
                        id="generateBtn"
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 transform hover:scale-105 shadow-lg"
                    >
                        ðŸ”„ Generate QR Code
                    </button>
                </div>

                <!-- Preview Section -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Preview & Download</h2>
                    
                    <!-- QR Code Display -->
                    <div id="qrDisplay" class="flex flex-col items-center justify-center min-h-[350px] border-2 border-dashed border-gray-300 rounded-lg mb-6 bg-gray-50">
                        <div id="qrPlaceholder" class="text-center text-gray-500">
                            <div class="animate-pulse">
                                <svg class="mx-auto h-16 w-16 mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                                <p class="text-lg font-medium">Your QR code will appear here</p>
                                <p class="text-sm">Click generate to create QR code</p>
                            </div>
                        </div>
                    </div>

                    <!-- QR Info -->
                    <div id="qrInfo" class="hidden mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
                        <p class="text-sm text-blue-800"><strong>Data:</strong> <span id="qrDataInfo"></span></p>
                        <p class="text-sm text-blue-800"><strong>Size:</strong> <span id="qrSizeInfo"></span></p>
                        <p class="text-sm text-blue-800"><strong>Error Level:</strong> <span id="qrErrorInfo"></span></p>
                    </div>

                    <!-- Download Buttons -->
                    <div class="grid grid-cols-2 gap-3">
                        <button 
                            id="downloadPngBtn"
                            class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg"
                            disabled
                        >
                            ðŸ“¥ Download PNG
                        </button>
                        <button 
                            id="downloadSvgBtn"
                            class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg"
                            disabled
                        >
                            ðŸ“„ Download SVG
                        </button>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div class="mt-12 grid md:grid-cols-4 gap-6">
                <div class="text-center p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">Lightning Fast</h3>
                    <p class="text-gray-600 text-sm">Generate QR codes instantly with professional quality</p>
                </div>

                <div class="text-center p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">Multiple Formats</h3>
                    <p class="text-gray-600 text-sm">Download as PNG for images or SVG for scalable graphics</p>
                </div>

                <div class="text-center p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3H5a2 2 0 00-2 2v12a4 4 0 004 4h2M9 3h6a2 2 0 012 2v12a4 4 0 01-4 4H9"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">Fully Customizable</h3>
                    <p class="text-gray-600 text-sm">Choose colors, sizes, and error correction levels</p>
                </div>

                <div class="text-center p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">Error Correction</h3>
                    <p class="text-gray-600 text-sm">Built-in error correction ensures reliable scanning</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentQRCode = null;
        let currentSVG = null;

        // Generate QR Code using qrcode-generator library
        function generateQRCode() {
            const text = document.getElementById('qrText').value.trim();
            const size = parseInt(document.getElementById('qrSize').value);
            const fgColor = document.getElementById('qrColor').value;
            const bgColor = document.getElementById('qrBgColor').value;
            const errorLevel = document.getElementById('errorLevel').value;
            
            if (!text) {
                showError('Please enter some text or URL to generate QR code');
                return;
            }

            try {
                // Show loading state
                showLoading();

                // Create QR code instance
                const qr = qrcode(0, errorLevel);
                qr.addData(text);
                qr.make();

                // Get module count for sizing
                const moduleCount = qr.getModuleCount();
                const cellSize = Math.floor(size / (moduleCount + 2)); // +2 for quiet zone
                const qrSize = cellSize * (moduleCount + 2);

                // Generate SVG
                const svgString = createSVG(qr, qrSize, cellSize, fgColor, bgColor);
                
                // Generate Canvas for PNG
                const canvas = createCanvas(qr, qrSize, cellSize, fgColor, bgColor);

                // Display QR code
                displayQRCode(canvas, svgString, text, qrSize, errorLevel);

                // Store for download
                currentQRCode = canvas;
                currentSVG = svgString;

                // Enable download buttons
                document.getElementById('downloadPngBtn').disabled = false;
                document.getElementById('downloadSvgBtn').disabled = false;

            } catch (error) {
                console.error('QR Code generation error:', error);
                showError('Error generating QR code. Please try with different text or settings.');
            }
        }

        // Create SVG string
        function createSVG(qr, size, cellSize, fgColor, bgColor) {
            const moduleCount = qr.getModuleCount();
            const quietZone = cellSize;
            
            let svg = `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" xmlns="http://www.w3.org/2000/svg">`;
            svg += `<rect width="${size}" height="${size}" fill="${bgColor}"/>`;
            
            for (let row = 0; row < moduleCount; row++) {
                for (let col = 0; col < moduleCount; col++) {
                    if (qr.isDark(row, col)) {
                        const x = col * cellSize + quietZone;
                        const y = row * cellSize + quietZone;
                        svg += `<rect x="${x}" y="${y}" width="${cellSize}" height="${cellSize}" fill="${fgColor}"/>`;
                    }
                }
            }
            
            svg += '</svg>';
            return svg;
        }

        // Create Canvas
        function createCanvas(qr, size, cellSize, fgColor, bgColor) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const moduleCount = qr.getModuleCount();
            const quietZone = cellSize;
            
            canvas.width = size;
            canvas.height = size;
            
            // Fill background
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, size, size);
            
            // Draw QR modules
            ctx.fillStyle = fgColor;
            for (let row = 0; row < moduleCount; row++) {
                for (let col = 0; col < moduleCount; col++) {
                    if (qr.isDark(row, col)) {
                        const x = col * cellSize + quietZone;
                        const y = row * cellSize + quietZone;
                        ctx.fillRect(x, y, cellSize, cellSize);
                    }
                }
            }
            
            return canvas;
        }

        // Display QR code
        function displayQRCode(canvas, svgString, text, size, errorLevel) {
            const qrDisplay = document.getElementById('qrDisplay');
            const qrInfo = document.getElementById('qrInfo');
            
            // Clear display
            qrDisplay.innerHTML = '';
            
            // Create container
            const container = document.createElement('div');
            container.className = 'text-center';
            
            // Add canvas with styling
            canvas.style.maxWidth = '100%';
            canvas.style.height = 'auto';
            canvas.style.borderRadius = '12px';
            canvas.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.2)';
            canvas.style.border = '4px solid white';
            
            container.appendChild(canvas);
            qrDisplay.appendChild(container);
            
            // Update info
            document.getElementById('qrDataInfo').textContent = text.length > 50 ? text.substring(0, 50) + '...' : text;
            document.getElementById('qrSizeInfo').textContent = `${size}x${size} pixels`;
            document.getElementById('qrErrorInfo').textContent = getErrorLevelName(errorLevel);
            qrInfo.classList.remove('hidden');
        }

        // Show loading state
        function showLoading() {
            const qrDisplay = document.getElementById('qrDisplay');
            qrDisplay.innerHTML = `
                <div class="text-center text-blue-600">
                    <div class="animate-spin mx-auto h-12 w-12 mb-4">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </div>
                    <p class="text-lg font-medium">Generating QR Code...</p>
                </div>
            `;
        }

        // Show error
        function showError(message) {
            const qrDisplay = document.getElementById('qrDisplay');
            qrDisplay.innerHTML = `
                <div class="text-center text-red-500">
                    <svg class="mx-auto h-12 w-12 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p class="text-lg font-medium">Error</p>
                    <p class="text-sm">${message}</p>
                </div>
            `;
            
            document.getElementById('downloadPngBtn').disabled = true;
            document.getElementById('downloadSvgBtn').disabled = true;
            document.getElementById('qrInfo').classList.add('hidden');
        }

        // Get error level name
        function getErrorLevelName(level) {
            const levels = { L: 'Low (7%)', M: 'Medium (15%)', Q: 'Quartile (25%)', H: 'High (30%)' };
            return levels[level] || 'Medium (15%)';
        }

        // Download PNG
        function downloadPNG() {
            if (!currentQRCode) {
                alert('Please generate a QR code first');
                return;
            }
            
            const link = document.createElement('a');
            link.download = 'qrcode.png';
            link.href = currentQRCode.toDataURL('image/png');
            link.click();
        }

        // Download SVG
        function downloadSVG() {
            if (!currentSVG) {
                alert('Please generate a QR code first');
                return;
            }
            
            const blob = new Blob([currentSVG], { type: 'image/svg+xml' });
            const link = document.createElement('a');
            link.download = 'qrcode.svg';
            link.href = URL.createObjectURL(blob);
            link.click();
            URL.revokeObjectURL(link.href);
        }

        // Event listeners
        document.getElementById('generateBtn').addEventListener('click', generateQRCode);
        document.getElementById('downloadPngBtn').addEventListener('click', downloadPNG);
        document.getElementById('downloadSvgBtn').addEventListener('click', downloadSVG);

        // Auto-generate on text input (with debounce)
        let debounceTimer;
        document.getElementById('qrText').addEventListener('input', function() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                if (this.value.trim()) generateQRCode();
            }, 800);
        });

        // Auto-generate on option changes
        ['qrSize', 'qrColor', 'qrBgColor', 'errorLevel'].forEach(id => {
            document.getElementById(id).addEventListener('change', () => {
                if (document.getElementById('qrText').value.trim()) {
                    setTimeout(generateQRCode, 100);
                }
            });
        });

        // Generate on Enter key
        document.getElementById('qrText').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                generateQRCode();
            }
        });

        // Generate initial QR code
        window.addEventListener('load', function() {
            setTimeout(generateQRCode, 300);
        });
    </script>
</body>
</html>
